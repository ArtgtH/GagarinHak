{% extends 'base.html' %}


{% block title %}
    File-uploader
{% endblock %}


{% block body %}
	<h1 style="margin-bottom: 2em; margin-top: 2em; text-align: center">Страница загрузки файла</h1>

    <div class="container content-block">
        <form class="upload-form" method="post" enctype="multipart/form-data" id="form">
            <h1>Upload Image</h1>
            <label for="image">Choose an image:</label>
            <input type="file" name="file" id="image" accept="image/*" required>
            <div class="image-preview"></div>
            <button type="submit" formaction="/res">Отправить</button>
            <button type="submit" formaction="/full_res">Отправить</button>
        </form>
    </div>

    <script>
      const imageInput = document.querySelector('#image');
      const imagePreview = document.querySelector('.image-preview');

      imageInput.addEventListener('change', function() {
        const file = this.files[0];
        const reader = new FileReader();

        reader.addEventListener('load', function() {
          const img = document.createElement('img');
          img.src = reader.result;
          imagePreview.innerHTML = '';
          imagePreview.appendChild(img);
        });

        reader.readAsDataURL(file);
      });
    </script>

{% endblock %}